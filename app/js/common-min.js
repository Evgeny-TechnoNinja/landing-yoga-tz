document.addEventListener("DOMContentLoaded",()=>{const e={name:null,phone:null,service:null},o=document.querySelector("#inform"),t=document.querySelectorAll("input[data-rule], select[data-rule]");let n,r;function l(e,t){o.innerText=e,o.style.color=t,o.style.opacity="1",setTimeout(()=>{o.style.opacity="0"},5e3)}document.querySelector('form[name="form"]').addEventListener("submit",o=>{if(o.preventDefault(),t.forEach((o,t)=>{switch(o.dataset.rule){case"name":(n=/^[A-Za-zА-Яа-яЁё]+$/g.test(o.value))?e.name=o.value.trim():(o.classList.add("js-form-invalid"),l("no send","tomato"));break;case"phone":r=o.value.replace(/[^\d]/g,""),(n=/^\d+$/.test(r))?e.phone=r:(o.classList.add("js-form-invalid"),l("no send","tomato"));break;case"service":n=/^[A-Za-zА-Яа-яЁё]+$/g.test(o.value),e.service=n?o.value:"no choice"}}),function(e){for(key in e)return null!==e[key]}(e)){const o=JSON.stringify(e);let n=new XMLHttpRequest;n.open("POST","/backend/write-db.php"),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(o),n.onreadystatechange=function(){4==n.readyState&&200===n.status&&(l("send","green"),t.forEach(e=>{e.value=""}))}}}),baguetteBox.run("#gallery",{fullScreen:!1}),jQuery(function(e){e("#btnMenuOpen, #btnMenuClose").on("click",()=>{e(".menu-mobile__popup").slideToggle(160,()=>{e(".menu-mobile__popup").is(":hidden")?e("body").removeClass("body-pointer"):e("body").addClass("body-pointer")})}),e(document).on("click",o=>{e(o.target).closest(".menu-mobile").length||(e("body").removeClass("body-pointer"),e(".menu-mobile__popup").slideUp(300))}),e("#formSelect").niceSelect(),e("#slickSliderAbout").slick({slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,dots:!1,prevArrow:!1,nextArrow:!1,speed:400,prevArrow:e("#btnSliderAboutPrev"),nextArrow:e("#btnSliderAboutNext")}),e("#slickSliderInfo").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,dots:!0,asNavFor:"#slickSliderPreview",dotsClass:"info-dots"}),e("#slickSliderPreview").slick({slidesToShow:1,slidesToScroll:1,asNavFor:"#slickSliderInfo",dots:!1,focusOnSelect:!0,prevArrow:e("#btnSliderPreviewPrev"),nextArrow:e("#btnSliderPreviewNext")}),e(".button-buy").on("mouseover mouseout",function(o){e(".card-goods__box-content-top").each((t,n)=>{e(o.target).data("btn-price")===e(n).data("price")&&e(n).toggleClass("js-bg-accent")})})})});